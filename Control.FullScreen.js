(function(){L.Control.FullScreen=L.Control.extend({options:{position:"topleft",title:"Full Screen",titleCancel:"Exit Full Screen",forceSeparateButton:!1,forcePseudoFullscreen:!1,fullscreenElement:!1},onAdd:function(a){var b,c="leaflet-control-zoom-fullscreen",d="";return b=a.zoomControl&&!this.options.forceSeparateButton?a.zoomControl._container:L.DomUtil.create("div","leaflet-bar"),this.options.content?d=this.options.content:c+=" fullscreen-icon",this._createButton(this.options.title,c,d,b,this.toggleFullScreen,this),this._map.fullscreenControl=this,this._map.on("enterFullscreen exitFullscreen",this._toggleTitle,this),b},onRemove:function(){L.DomEvent.off(this.link,"click",L.DomEvent.stopPropagation).off(this.link,"click",L.DomEvent.preventDefault).off(this.link,"click",this.toggleFullScreen,this),L.DomEvent.off(this._container,a.fullScreenEventName,L.DomEvent.stopPropagation).off(this._container,a.fullScreenEventName,L.DomEvent.preventDefault).off(this._container,a.fullScreenEventName,this._handleFullscreenChange,this),L.DomEvent.off(document,a.fullScreenEventName,L.DomEvent.stopPropagation).off(document,a.fullScreenEventName,L.DomEvent.preventDefault).off(document,a.fullScreenEventName,this._handleFullscreenChange,this)},_createButton:function(b,c,d,e,f,g){return this.link=L.DomUtil.create("a",c,e),this.link.href="#",this.link.title=b,this.link.innerHTML=d,this.link.setAttribute("role","button"),this.link.setAttribute("aria-label",b),L.DomEvent.on(this.link,"click",L.DomEvent.stopPropagation).on(this.link,"click",L.DomEvent.preventDefault).on(this.link,"click",f,g),L.DomEvent.on(e,a.fullScreenEventName,L.DomEvent.stopPropagation).on(e,a.fullScreenEventName,L.DomEvent.preventDefault).on(e,a.fullScreenEventName,this._handleFullscreenChange,g),L.DomEvent.on(document,a.fullScreenEventName,L.DomEvent.stopPropagation).on(document,a.fullScreenEventName,L.DomEvent.preventDefault).on(document,a.fullScreenEventName,this._handleFullscreenChange,g),this.link},toggleFullScreen:function(){var b=this._map;b._exitFired=!1,b._isFullscreen?(a.supportsFullScreen&&!this.options.forcePseudoFullscreen?a.cancelFullScreen():L.DomUtil.removeClass(this.options.fullscreenElement?this.options.fullscreenElement:b._container,"leaflet-pseudo-fullscreen"),b.fire("exitFullscreen"),b._exitFired=!0,b._isFullscreen=!1):(a.supportsFullScreen&&!this.options.forcePseudoFullscreen?a.requestFullScreen(this.options.fullscreenElement?this.options.fullscreenElement:b._container):L.DomUtil.addClass(this.options.fullscreenElement?this.options.fullscreenElement:b._container,"leaflet-pseudo-fullscreen"),b.fire("enterFullscreen"),b._isFullscreen=!0)},_toggleTitle:function(){this.link.title=this._map._isFullscreen?this.options.title:this.options.titleCancel},_handleFullscreenChange:function(){var b=this._map;b.invalidateSize(),a.isFullScreen()||b._exitFired||(b.fire("exitFullscreen"),b._exitFired=!0,b._isFullscreen=!1)}}),L.Map.include({toggleFullscreen:function(){this.fullscreenControl.toggleFullScreen()}}),L.Map.addInitHook(function(){this.options.fullscreenControl&&this.addControl(L.control.fullscreen(this.options.fullscreenControlOptions))}),L.control.fullscreen=function(a){return new L.Control.FullScreen(a)};var a={supportsFullScreen:!1,isFullScreen:function(){return!1},requestFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",prefix:""},b=["webkit","moz","o","ms","khtml"];if("undefined"!=typeof document.exitFullscreen)a.supportsFullScreen=!0;else{for(var c=0,d=b.length;c<d;c++)if(a.prefix=b[c],"undefined"!=typeof document[a.prefix+"CancelFullScreen"]){a.supportsFullScreen=!0;break}"undefined"!=typeof document.msExitFullscreen&&(a.prefix="ms",a.supportsFullScreen=!0)}a.supportsFullScreen&&(a.fullScreenEventName="ms"===a.prefix?"MSFullscreenChange":a.prefix+"fullscreenchange",a.isFullScreen=function(){switch(this.prefix){case"":return document.fullscreen;case"webkit":return document.webkitIsFullScreen;case"ms":return document.msFullscreenElement;default:return document[this.prefix+"FullScreen"];}},a.requestFullScreen=function(a){switch(this.prefix){case"":return a.requestFullscreen();case"ms":return a.msRequestFullscreen();default:return a[this.prefix+"RequestFullScreen"]();}},a.cancelFullScreen=function(){switch(this.prefix){case"":return document.exitFullscreen();case"ms":return document.msExitFullscreen();default:return document[this.prefix+"CancelFullScreen"]();}}),"undefined"!=typeof jQuery&&(jQuery.fn.requestFullScreen=function(){return this.each(function(){var b=jQuery(this);a.supportsFullScreen&&a.requestFullScreen(b)})}),window.fullScreenApi=a})();